<!DOCTYPE html>
<html>
<head>
    <title>Ejecución de Shell</title>
    <script>
        var apiUrl;
        fetch('/api/url')
            .then(function(response) {
                return response.text();
            })
            .then(function(data) {
                apiUrl = data;
            })
            .catch(function(error) {
                console.error('Error al obtener la URL de la API:', error);
            });

        function executeShell() {
            var param1 = document.getElementById("param1").value;
            var param2 = document.getElementById("param2").value;
            var param3 = document.getElementById("param3").value;

            var eventSource = new EventSource(apiUrl + param1 + "/" + param2 + "/" + param3);
            eventSource.timeout = 0;

            eventSource.onmessage = function(event) {
                var outputDiv = document.getElementById("output");
                outputDiv.innerHTML += event.data + "<br>";

                if (event.data === "Script finalizado") {
                    eventSource.close();
                }
            };

            eventSource.onerror = function() {
                eventSource.close();
            };
        }
    </script>
</head>
<body>
    <h1>Ejecución de Shell</h1>
    <div>
        <label for="param1">Parámetro 1:</label>
        <input type="text" id="param1">
    </div>
    <div>
        <label for="param2">Parámetro 2:</label>
        <input type="text" id="param2">
    </div>
    <div>
        <label for="param3">Parámetro 3:</label>
        <input type="text" id="param3">
    </div>
    <button onclick="executeShell()">Ejecutar</button>
    <div id="output"></div>
</body>
</html>
